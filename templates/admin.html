<!DOCTYPE html>
<html lang="sr">
<head>
<meta charset="UTF-8">
<title>Admin – posebni datumi</title>
<style>
  body { font-family: system-ui, Arial, sans-serif; padding: 24px; max-width: 860px; margin: auto; color:#111827; }
  h2 { margin: 0 0 12px; }
  .hint { color:#6b7280; margin-bottom: 12px; }
  form { display: grid; grid-template-columns: repeat(6, minmax(0, 1fr)); gap: 10px; align-items: end; margin: 12px 0 18px; }
  label { display: flex; flex-direction: column; gap: 6px; font-size: 0.95rem; }
  input[type="date"], input[type="number"] { padding: 8px 10px; border-radius: 8px; border:1px solid #e5e7eb; }
  .neradni { display:flex; gap:8px; align-items:center; margin:0 6px; }
  button { padding: 9px 14px; border-radius: 10px; border: 1px solid #e5e7eb; background:#f3f4f6; cursor:pointer; }
  button:hover { background:#e5e7eb; }
  table { width: 100%; border-collapse: collapse; margin-top: 8px; }
  th, td { padding: 10px; border-bottom: 1px solid #eee; text-align: left; }
  th { background:#fafafa; font-weight:600; }
  .tag { display:inline-block; padding:3px 8px; border-radius:999px; font-size: .85rem; border:1px solid #e5e7eb; }
  .ok { background:#ecfdf5; border-color:#a7f3d0; }
  .no { background:#fef2f2; border-color:#fecaca; }
  .muted { color:#6b7280; }
  a.btn-del { text-decoration:none; padding:6px 10px; border:1px solid #e11d48; color:#e11d48; border-radius:8px; }
</style>
<script>
  function toggleNeradni(chk) {
    const start = document.querySelector('input[name="start"]');
    const end = document.querySelector('input[name="end"]');
    if (chk.checked) {
      start.disabled = true; end.disabled = true;
      start.value = ""; end.value = "";
    } else {
      start.disabled = false; end.disabled = false;
    }
  }
</script>
</head>
<body>
  <h2>Admin – posebni datumi</h2>
  <div class="hint">Dodaj ili izmijeni radno vrijeme za specifičan datum. Ako označiš “Neradni dan”, taj datum će se snimiti kao neradan u <code>data.json</code>.</div>

  <form method="POST">
    <label>Datum
      <input type="date" name="datum" required>
    </label>
    <label>Start (sat)
      <input type="number" name="start" min="0" max="23" placeholder="npr. 10">
    </label>
    <label>End (sat)
      <input type="number" name="end" min="1" max="24" placeholder="npr. 20">
    </label>
    <label class="neradni">
      <input type="checkbox" name="neradni" onchange="toggleNeradni(this)"> Neradni dan
    </label>
    <div></div>
    <button type="submit">Sačuvaj</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Datum</th>
        <th>Start</th>
        <th>End</th>
        <th>Status sada</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for r in posebni_rows %}
      <tr>
        <td>{{ r.datum }} {% if r.datum == danas %}<span class="muted">(danas)</span>{% endif %}</td>
        <td>{{ r.start if r.start is not none else '—' }}</td>
        <td>{{ r.end if r.end is not none else '—' }}</td>
        <td>
          {% if r.status == 'Otvoreno sada' %}
            <span class="tag ok">Otvoreno sada</span>
          {% elif r.status == 'Zatvoreno sada' %}
            <span class="tag no">Zatvoreno sada</span>
          {% elif r.status == 'Neradan dan (danas)' %}
            <span class="tag no">Neradan dan</span>
          {% else %}
            <span class="muted">—</span>
          {% endif %}
        </td>
        <td><a class="btn-del" href="{{ url_for('obrisi', datum=r.datum) }}">Obriši</a></td>
      </tr>
      {% else %}
      <tr><td colspan="5" class="muted">Nema specijalnih zapisa.</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <p><a href="/">← Nazad</a></p>
</body>
</html>
